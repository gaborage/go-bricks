# Example configuration file demonstrating both standard and custom configurations

# Standard framework configurations
app:
  name: my-service
  version: v1.0.0
  env: development
  debug: true
  namespace: default
  rate:
    limit: 100
    burst: 200
    ippreguard:
      enabled: false
      threshold: 2000          # IP rate limit threshold (requests per second)

server:
  host: 0.0.0.0
  port: 8080
  timeout:
    read: 15s
    write: 30s
    idle: 60s
    middleware: 5s
    shutdown: 10s
  path:
    base: ""          # Global prefix for all routes (e.g., "/api/v1")
    health: /health   # Custom health endpoint path
    ready: /ready     # Custom readiness endpoint path

database:
  type: postgresql
  host: localhost
  port: 5432
  database: myapp_db
  username: myapp_user
  password: myapp_password

  connectionstring: ""  # Optional: override with full connection string

  pool:
    max:
      connections: 25
    idle:
      connections: 5
      time: 5m
    lifetime:
      max: 30m

  query:
    slow:
      threshold: 100ms
      enabled: true
    log:
      parameters: true
      max: 1000

  tls:
    mode: disable
    cert: ""
    key: ""
    ca: ""

  # Oracle-specific configuration
  oracle:
    service:
      name: ORCL
      sid: ""

  # MongoDB-specific configuration
  mongo:
    replica:
      set: rs0
      preference: primary
    auth:
      source: admin
    concern:
      write: majority

log:
  level: debug
  pretty: true
  output:
    format: json
    file: ""

# Messaging configuration (OPTIONAL - only required if using AMQP/RabbitMQ)
# If not using messaging, you can omit this entire section or leave broker.url empty
messaging:
  broker:
    url: amqp://localhost:5672/
    virtualhost: /
  routing:
    exchange: my-exchange
    key: my-routing-key
  headers:
    x-app-name: my-service
    x-environment: development

multitenant:
  enabled: false
  resolver:
    type: header                 # Options: header, subdomain, composite
    header: X-Tenant-ID          # Header name for header-based resolution
    domain: api.example.com      # Root domain (leading dot optional)
    proxies: false               # Trust X-Forwarded-Host header
  cache:
    ttl: 5m                      # Time-to-live for cached tenant configurations
  limits:
    tenants: 100                 # Maximum number of active tenant connections
    cleanup:
      interval: 5m               # Idle connection cleanup cadence
  validation:
    pattern: "^[a-z0-9-]{1,64}$" # Regex pattern for validating tenant IDs

# Phase 2 (example provider data):
# tenants:
#   tenant-a:
#     database:
#       host: tenant-a.db.example.com
#       port: 5432
#       database: tenant_a_prod
#       username: app_user
#       password: secure_password
#     messaging:
#       url: amqp://rabbitmq.example.com:5672/tenant-a  # Optional - omit if tenant doesn't use messaging

# Custom configurations - add your application-specific settings here
custom:
  # Feature flags
  flags:
    home:
      v2: 
        enabled: true

  # Service-specific configurations
  service:
    api:
      endpoint: https://api.example.com/v1
      # DO NOT commit real secrets to config files; prefer env vars or secret stores.
      key: your-api-key-here
    timeout: 30s
    retries: 
      max: 3
      delay: 5s
    batch: 
      size: 100

  # Cache settings
  cache:
    redis:
      url: localhost:6379
      ttl: 5m
      entries:
        max: 10000

  # Notification settings
  notifications:
    email:
      enabled: true
      smtp:
        host: smtp.example.com
        port: 587
        from: noreply@example.com

    slack:
      enabled: false
      webhook:
        url: https://hooks.slack.com/services/YOUR/WEBHOOK/URL
      channel: "#alerts"

  # Security settings
  security:
    jwt:
      secret: your-secret-key-here
      expiry: 24h
    password:
      length:
        min: 8
        max: 64
    2fa:
      required: false
    origins:
      allowed:
      - http://localhost:3000
      - https://app.example.com
